import time
import pygame
import feedparser
from gtts import gTTS

# RSS Feed URL from Magic Mirror config
RSS_URL = "https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml"

# Function to fetch news from RSS
def get_nyt_news():
    try:
        feed = feedparser.parse(RSS_URL)
        if not feed.entries:
            print("No news found.")
            return []
        
        return [entry.title for entry in feed.entries[:5]]  # Fetch top 5 headlines
    
    except Exception as e:
        print(f"Error fetching news: {e}")
        return []

# Function to speak the news
def speak_news(news):
    audio_file = "breakingnews.mp3"
    try:
        pygame.mixer.init()
        for headline in news:
            print(f"Breaking News: {headline}")

            # Convert text to speech and save as MP3
            tts = gTTS(text=f"Breaking news: {headline}", lang='en', slow=False)
            tts.save(audio_file)

            # Play the audio file
            pygame.mixer.music.load(audio_file)
            pygame.mixer.music.play()

            # Wait until the audio finishes playing
            while pygame.mixer.music.get_busy():
                time.sleep(0.1)

    except Exception as e:
        print(f"Error during text-to-speech: {e}")

# Fetch and speak the news
news = get_nyt_news()
if news:
    speak_news(news)
else:
    print("No news to speak.")



george joshep sir,-0.09949704259634018,0.08533643186092377,0.08074324578046799,0.01547013595700264,-0.03186464682221413,-0.09432902932167053,-0.07437247037887573,-0.15745221078395844,0.17335693538188934,-0.053863298147916794,0.1754150390625,0.0057861097157001495,-0.1086091548204422,-0.07300736755132675,-0.03008333407342434,0.09525097906589508,-0.16873887181282043,-0.11308030039072037,-0.07233460992574692,-0.08386097848415375,-0.008446815423667431,-0.03995724767446518,0.07427244633436203,0.024495432153344154,-0.07421765476465225,-0.3193131685256958,-0.14712999761104584,-0.2131018340587616,0.19393019378185272,-0.09720134735107422,-0.03146769851446152,-0.00854879803955555,-0.2327757328748703,-0.08863546699285507,-0.01894153468310833,0.025944571942090988,-0.0004677183460444212,-0.022058241069316864,0.2367994785308838,-0.02754645235836506,-0.1299239993095398,0.05780791491270065,0.020699189975857735,0.2053319215774536,0.2981238067150116,0.025203887373209,-0.04589173197746277,-0.024123232811689377,0.10156530141830444,-0.12806382775306702,0.04866120591759682,0.12863749265670776,0.20946992933750153,0.10273919254541397,0.09077464789152145,-0.12813501060009003,0.038325488567352295,0.03323093056678772,-0.233070507645607,0.06274045258760452,0.04514961689710617,-0.09109188616275787,-0.0295037180185318,0.03778064250946045,0.20129436254501343,0.09304741024971008,-0.06373614817857742,-0.09527283906936646,0.18688887357711792,-0.14950144290924072,0.07791690528392792,0.04738039895892143,-0.10657943785190582,-0.09517614543437958,-0.21193867921829224,0.005143824964761734,0.3436272144317627,0.11961235105991364,-0.19659973680973053,0.04741581529378891,-0.16249077022075653,-0.07547259330749512,-0.02528151497244835,-0.036699078977108,-0.07617217302322388,-0.0710691511631012,-0.059663549065589905,0.007996834814548492,0.10062907636165619,-0.006343908607959747,0.03201526030898094,0.15341396629810333,-0.08588767051696777,0.0223313570022583,-0.007278301753103733,0.014910997822880745,-0.14828899502754211,-0.02563810534775257,-0.08668123930692673,-0.05539856106042862,-0.013802958652377129,-0.06816433370113373,0.02479315735399723,0.05795029550790787,-0.19193239510059357,0.11459876596927643,0.03339890018105507,-0.015003154054284096,-0.01875692792236805,0.04570472240447998,-0.0892026349902153,-0.006393242161720991,0.18795141577720642,-0.23925955593585968,0.3343958556652069,0.1541014015674591,-0.06303198635578156,0.11029891669750214,0.013820533640682697,0.0616014264523983,-0.06429654359817505,-0.02348540537059307,-0.11437417566776276,-0.07705868780612946,-0.0102840019389987,-0.0561736598610878,0.05190802738070488,0.05873851478099823


